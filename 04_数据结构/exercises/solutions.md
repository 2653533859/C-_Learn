# 数据结构练习题集（参考解答）

> 以下解答提供实现思路、关键代码片段与复杂度分析，供对照与拓展使用。建议在独立完成实现后再查阅。

---

## 🌱 入门级

1. **数组去重**  
   - 思路：使用双指针维护“已处理区域”，通过内层循环检测是否出现过当前元素，若无则写入。  
   - 代码片段：
     ```c
     size_t unique_ints(int *arr, size_t len) {
         size_t write = 0;
         for (size_t i = 0; i < len; ++i) {
             int found = 0;
             for (size_t j = 0; j < write; ++j) {
                 if (arr[j] == arr[i]) { found = 1; break; }
             }
             if (!found) {
                 arr[write++] = arr[i];
             }
         }
         return write;
     }
     ```
   - 复杂度：时间 `O(n^2)`（均匀分布时）；空间 `O(1)` 原地。

2. **字符串切片**  
   - 处理非法输入（`start >= end` 或 `src` 长度不足）时返回空字符串。  
   - 使用 `size_t` 避免负值，复制时确保不越界并补 `\0`。  
   - 边界情况下 `dest[0] = '\0';`。

3. **结构体排序**  
   - 比较函数：先比较 `price`，若相等再用 `strcmp(title_a, title_b)`。  
   - `qsort` 平均时间复杂度 `O(n log n)`，最坏可能退化到 `O(n^2)`。

---

## 🚀 进阶级

4. **单链表区间反转**  
   - 先走到 `left` 位置，记录前驱指针，再用头插法反转区间。  
   - 若索引越界，保持链表不变；空表直接返回。  
   - 复杂度 `O(n)`，额外空间 `O(1)`。

5. **环检测与定位**  
   - 第一阶段：`slow` 每次走一步、`fast` 每次走两步，若相遇则存在环。  
   - 第二阶段：将其中一个指针移回头节点，两指针同步前进，相遇点即入环节点。  
   - 环长度：保持一个指针原地遍历一圈计数。  
   - 复杂度 `O(n)`，空间 `O(1)`。

6. **双端队列**  
   - 使用 `front`/`rear` 索引，在扩容时重新排列元素使其从 0 开始。  
   - 扩容需复制 `n` 个元素，但由于容量翻倍，均摊摊销成本保持 `O(1)`。

---

## 🧠 挑战级

7. **稀疏矩阵压缩**  
   - 三元组 `struct Triple { int row, col, value; };`，按照行、列排序存储非零元素。  
   - 加法：双指针合并同一位置项，相同行列相加，结果为零则跳过。  
   - 最坏空间：当矩阵接近稠密时，仍需存储 `O(n*m)` 项，退化为普通矩阵。

8. **表达式求值**  
   - 伪代码：
     1. 读取 token；若为数字入操作数栈。
     2. 若为运算符，弹出栈中优先级更高或相等的运算符执行，再压入当前运算符。
     3. 遇到左括号直接入栈；右括号则弹出直到配对。
     4. 输入结束后执行剩余运算符。
   - 时间复杂度 `O(n)`，其中 `n` 为 token 数目。

9. **二叉搜索树自平衡**  
   - AVL：维护节点高度与平衡因子 `bf = height(left) - height(right)`，插入后自底向上执行 LL/RR/LR/RL 旋转。  
   - 红黑树：维护颜色、根黑、红节点子节点必为黑等性质，插入后通过旋转与变色修正。  
   - 相比普通 BST，平衡树保证高度 `O(log n)`，插入成本增加常数因子但仍为对数级。

10. **最近公共祖先**  
    - 通用递归：若根为空或等于任一目标返回根；递归左右子树，若两侧均非空则根为 LCA，否则返回非空子树。  
    - 迭代：使用父指针或栈追溯到根，构建祖先集合后查找交集。  
    - BST 优化：若两个值都小于根则向左，大于则向右，首次分叉或命中即为答案，时间 `O(h)`。

---

> 继续挑战：尝试将参考答案中的思路转化为完整代码，并使用单元测试验证正确性。
