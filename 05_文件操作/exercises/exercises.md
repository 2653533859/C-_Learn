# 文件操作模块练习题

本练习集聚焦于真实世界中常见的文件处理需求。建议先阅读 [`guide.md`](../guide.md) 并运行 `examples/` 下的示例，再尝试以下任务。

> 难度标记：🟢 入门 | 🟡 进阶 | 🔴 挑战

---

## 练习 1：日志等级统计 🟢
- **目标**：编写程序读取服务器日志文件，统计出现的 `INFO`、`WARN`、`ERROR` 行数。
- **输入**：纯文本日志，每行形如 `2024-01-01T10:00:00Z [ERROR] Disk full`。
- **输出**：打印各等级的数量，例如：
  ```
  INFO : 125
  WARN : 42
  ERROR: 7
  ```
- **要求**：
  - 使用 `fgets` 逐行读取，避免缓冲区溢出。
  - 对未知等级行进行计数，并在结果中输出 `UNKNOWN`。
  - 处理文件打开失败与读取错误。

## 练习 2：二进制文件复制 🟡
- **目标**：实现跨平台的文件复制工具，能够无损复制图片、音频等二进制文件。
- **输入**：源文件路径和目标文件路径，通过命令行参数传入。
- **输出**：复制成功后提示字节数，失败时打印错误信息。
- **要求**：
  - 以二进制模式打开文件（`rb`/`wb`）。
  - 使用缓冲区（推荐 4 KB 或更大）循环读取与写入。
  - 复制完成后校验总字节数是否一致。
  - 处理常见错误：文件不存在、权限不足、磁盘写满。

## 练习 3：文件统计器 🟡
- **目标**：编写统计工具，报告文本文件中的行数、单词数与字节数。
- **输入**：文本文件路径，通过命令行参数或标准输入重定向提供。
- **输出**：示例格式 `Lines: 120, Words: 850, Bytes: 5420`。
- **要求**：
  - 使用 `fgetc` 或 `fgets` 读取内容。
  - 单词定义为由空白字符分隔的连续非空白序列。
  - 支持从标准输入读取（即文件名为 `-` 时读取 `stdin`）。
  - 对于超长行要保持鲁棒性。

## 练习 4：部分文件提取 🔴
- **目标**：读取大型日志或数据文件的某一段内容，例如第 `N` 行到第 `M` 行或指定字节范围。
- **输入**：文件路径、起始偏移与长度（字节数），通过命令行参数提供。
- **输出**：打印被提取的文本或将其写入目标文件。
- **要求**：
  - 使用 `fseek`/`ftell` 在大文件中定位。
  - 检测并拒绝超出文件大小的偏移。
  - 为提高性能，允许用户选择缓冲区大小（命令行选项）。
  - 当文件过小或偏移无效时，给出明确错误信息。

---

## 提交建议

1. 在 `src/` 目录下为每个练习建立独立的源文件，命名形如 `log_stats.c`、`file_copy.c`。
2. 使用 `gcc your_file.c -o your_program -Wall -Wextra -std=c11` 进行编译。
3. 为每个练习准备示例输入文件，并在 README 或提交说明中记录测试命令。
4. 若支持命令行选项，提供 `--help` 输出或使用说明。
